var venAutocomplete=function(e){"use strict";var t=e.defineComponent({name:"autocomplete",emits:["update:modelValue","inputEvent","changed","opened"],props:{disabledSymobols:{type:String,default:"£™¢∞§¶•ª•ªº"},min:{type:Number,min:1},max:{type:Number,default:200},dublicates:{type:Boolean,default:!1},placeholder:{type:[String,Number]},list:{type:Array,default:()=>[]},modelValue:{type:[Array,String,Number],default:()=>[]}},watch:{modelValue(e){this.innerValue=this.filterModel(e),this.$emit("changed",this.filterModel(e))},open(){this.highlight=0,this.$emit("opened",this.open)},inputData(){this.highlight=0,this.$emit("inputEvent",this.inputData)}},computed:{computedList(){return this.list.filter((e=>e&&this.inputData&&e.toLowerCase().includes(this.inputData.toLowerCase())&&!this.innerValue.find((t=>t.toLowerCase()===e.toLowerCase()))))}},mounted(e,t){this.filterModel(this.modelValue),this.$emit("update:modelValue",this.filterModel(this.modelValue)),document.addEventListener("click",this.closeHandler)},beforeUnmount(){document.removeEventListener("click",this.closeHandler)},data(){return{inputData:null,innerValue:this.filterModel(this.modelValue),open:!1,highlight:0}},directives:{outside:{mounted(e,t){const i=i=>{e.contains(i.target)||e===i.target||t.value(i)};e.__ClickOutsideHandler__=i,document.addEventListener("click",i)},beforeUnmount(e){document.removeEventListener("click",e.__ClickOutsideHandler__)},getSSRProps:(e,t)=>({})}},methods:{closeHandler(e){},closeList(){this.open=!1},scrolIntoList(){const e=this.$refs.ohThisFuckingIndex;if(!e||!e.length)return;e[this.highlight].scrollIntoView({block:"center"})},goBottom(){this.computedList.length>this.highlight+1&&this.highlight++,this.scrolIntoList()},goUp(){0!==this.highlight&&this.highlight--,this.scrolIntoList()},selectTag(e){this.inputData=null,this.innerValue.push(e),this.open=!1,this.$emit("update:modelValue",this.filterModel(this.innerValue)),this.blurNeed()},uniqueArray:e=>e.filter(((e,t,i)=>i.map((e=>e.toLowerCase())).indexOf(e.toLowerCase())===t)),filterModel(e){if(!this.disabledSymobols||!e||!e.length)return;let t=[];const i=e.map((e=>{let t=e;return[...this.disabledSymobols].forEach((e=>t=t.replaceAll(e,""))),t}));return this.innerValue=i,t=i,this.dublicates||(t=this.uniqueArray(t)),t},blurNeed(){this.$refs.venAutocomplete.focus(),this.closeList()},removeLast(){!this.inputData&&this.innerValue&&this.innerValue.length&&(this.modelValue.pop(),this.innerValue.pop())},removeIndex(e){const t=this.modelValue.filter(((t,i)=>i!==e));this.$emit("update:modelValue",t)},goEnter(){this.open?(this.innerValue.push(this.computedList[this.highlight]),this.open=!1,this.inputData=null,this.$emit("update:modelValue",this.filterModel(this.innerValue))):this.hendeHoh()},hendeHoh(){let e=[];if(this.disabledSymobols&&(e=this.disabledSymobols),[...e,","].forEach((e=>this.inputData=this.inputData.replaceAll(e,""))),!(!this.inputData||this.inputData.length<this.min||this.inputData.length>this.max)){if(this.inputData=this.inputData.replaceAll(",",""),this.modelValue){const e=[...this.modelValue,this.inputData];this.$emit("update:modelValue",this.filterModel(e))}else this.$emit("update:modelValue",this.filterModel([this.inputData]));this.inputData=null}},goType(e){this.open=this.computedList.length>0,this.disabledSymobols&&[...this.disabledSymobols].forEach((e=>this.inputData=this.inputData.replaceAll(e,""))),(","===e.data||this.inputData&&this.inputData.includes(","))&&/[^,]/.test(this.inputData)?this.hendeHoh():/[^,]/.test(this.inputData)||(this.inputData=null),this.inputData&&this.inputData.length||(this.open=!1)}}});const i=["onClick"],n=[e.createElementVNode("span",null,null,-1)],l=["placeholder","maxlength"],o={key:0,class:"venAutocomplete__dropdown"},s=["onMouseenter","onClick"];t.render=function(t,a,r,h,u,c){const d=e.resolveDirective("outside");return e.withDirectives((e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["venAutocomplete",{venAutocomplete_active:t.open}])},[e.createElementVNode("div",{class:"venAutocomplete__input",onClick:a[8]||(a[8]=function(){return t.blurNeed&&t.blurNeed(...arguments)})},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.innerValue,((l,o)=>(e.openBlock(),e.createElementBlock("div",{class:"venAutocomplete__selected",key:"vv"+o},[e.createTextVNode(e.toDisplayString(l)+" ",1),e.createElementVNode("div",{class:"venAutocomplete__close",onClick:e=>t.removeIndex(o)},n,8,i)])))),128)),e.withDirectives(e.createElementVNode("input",{ref:"venAutocomplete","onUpdate:modelValue":a[0]||(a[0]=e=>t.inputData=e),autocomplete:"off",placeholder:t.placeholder,type:"text",maxlength:t.max,onInput:a[1]||(a[1]=function(){return t.goType&&t.goType(...arguments)}),onKeydown:[a[2]||(a[2]=e.withKeys(e.withModifiers((function(){return t.goEnter&&t.goEnter(...arguments)}),["prevent"]),["enter"])),a[3]||(a[3]=e.withKeys(e.withModifiers((function(){return t.goEnter&&t.goEnter(...arguments)}),["prevent"]),["tab"])),a[4]||(a[4]=e.withKeys(e.withModifiers((function(){return t.goBottom&&t.goBottom(...arguments)}),["prevent"]),["down"])),a[5]||(a[5]=e.withKeys(e.withModifiers((function(){return t.goUp&&t.goUp(...arguments)}),["prevent"]),["up"])),a[6]||(a[6]=e.withKeys(e.withModifiers((function(){return t.closeList&&t.closeList(...arguments)}),["prevent"]),["esc"])),a[7]||(a[7]=e.withKeys((function(){return t.removeLast&&t.removeLast(...arguments)}),["backspace"]))],class:"venAutocomplete__field"},null,40,l),[[e.vModelText,t.inputData]])]),t.open?(e.openBlock(),e.createElementBlock("div",o,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.computedList,((i,n)=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["venAutocomplete__item",{highlight:t.highlight===n}]),ref_for:!0,ref:"ohThisFuckingIndex",onMouseenter:e=>t.highlight=n,key:"gvs"+n,onClick:e=>t.selectTag(i)},e.toDisplayString(i),43,s)))),128))])):e.createCommentVNode("",!0)],2)),[[d,t.closeList]])};var a=(()=>{const e=t;return e.install=t=>{t.component("venAutocomplete",e)},e})(),r=Object.freeze({__proto__:null,default:a});return Object.entries(r).forEach((e=>{let[t,i]=e;"default"!==t&&(a[t]=i)})),a}(Vue);